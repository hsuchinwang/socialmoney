function statusChangeCallback(a){console.log("statusChangeCallback");console.log(a);"connected"===a.status?(getUserPic(),document.getElementById("logindiv").style.display="none",document.getElementById("status").innerHTML=""):("not_authorized"===a.status?document.getElementById("status").innerHTML="Please log into this app.":document.getElementById("status").innerHTML="Please log into Facebook.",navigator.userAgent.match("CriOS")&&loginWithFacebook())}
function loginWithFacebook(){var a=document.location.href,a=-1!==a.indexOf("?")?a+"&back_from_fb=1":a+"?back_from_fb=1";window.open("https://www.facebook.com/dialog/oauth?client_id=1493213687646728&redirect_uri="+a+"&scope=email,public_profile","_self")}function checkLoginState(){FB.getLoginStatus(function(a){statusChangeCallback(a)})}
function getUserPic(){FB.api("/me","GET",{fields:"name,picture"},function(a){console.log(a);!a||a.error?(alert(a?a.error:"error occurred"),console.log(a)):(document.getElementById("userpic").src=a.picture.data.url,document.getElementById("name").innerHTML=a.name,$.post("https://socialmoney.herokuapp.com/save_name",{name:a.name},function(a){console.log(a)}),loadCurrency())})}
window.fbAsyncInit=function(){FB.init({appId:"1493213687646728",cookie:!0,xfbml:!0,version:"v2.5",channelUrl:"//socialmoney.herokuapp.com"});FB.getLoginStatus(function(a){statusChangeCallback(a)})};(function(a,b,c){var d=a.getElementsByTagName(b)[0];a.getElementById(c)||(a=a.createElement(b),a.id=c,a.src="//connect.facebook.net/en_US/sdk.js",d.parentNode.insertBefore(a,d))})(document,"script","facebook-jssdk");